#!/bin/bash

echo "🧪 测试复杂排盘数据处理"
echo "================================"

# 测试完整的排盘数据
echo "测试完整排盘数据..."
curl -X POST http://localhost:3001/api/analysis/qimen \
  -H "Content-Type: application/json" \
  -d '{
    "question": "我的事业运势如何？",
    "paipanData": {
      "干支": "乙巳年 壬午月 戊午日 壬子時",
      "排局": "陽遁三局中元",
      "節氣": "芒種",
      "值符值使": {
        "值符星宫": ["柱", "兌"],
        "值使門宫": ["驚", "乾"]
      },
      "旬空": {
        "日空": "子丑",
        "時空": "寅卯"
      },
      "門": {
        "乾": "驚",
        "坎": "開",
        "艮": "休",
        "震": "生",
        "巽": "傷",
        "離": "杜",
        "坤": "景",
        "兌": "死"
      },
      "星": {
        "兌": "柱",
        "乾": "心",
        "坎": "蓬",
        "艮": "任",
        "震": "沖",
        "巽": "輔",
        "離": "英",
        "坤": "禽"
      },
      "神": {
        "兌": "符",
        "乾": "蛇",
        "坎": "陰",
        "艮": "合",
        "震": "勾",
        "巽": "雀",
        "離": "地",
        "坤": "天"
      }
    }
  }' | jq '.analysis.answer' | head -20

echo -e "\n\n✅ 复杂数据测试完成！" 