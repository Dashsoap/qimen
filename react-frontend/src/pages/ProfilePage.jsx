import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useSelector, useDispatch } from 'react-redux';
import { logoutUser } from '../stores/authSlice';
import './ProfilePage.css';

const ProfilePage = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const { isAuthenticated, user } = useSelector(state => state.auth);
  
  const [message, setMessage] = useState('');
  const [messageType, setMessageType] = useState('');
  const [_userPoints, _setUserPoints] = useState(null);
  const [checkinStatus, setCheckinStatus] = useState({
    isCheckedIn: false,
    continuousStreak: 3,
    checkinTime: null,
    todayBonus: 10
  });
  const [isCheckinLoading, setIsCheckinLoading] = useState(false);

  const userInitial = user?.username ? user.username.charAt(0).toUpperCase() : 'U';

  const showMessage = (text, type = 'info') => {
    setMessage(text);
    setMessageType(type);
    setTimeout(() => {
      setMessage('');
    }, 3000);
  };

  // 执行签到
  const doCheckin = async () => {
    if (isCheckinLoading) return;
    
    setIsCheckinLoading(true);
    
    try {
      // 模拟签到API调用
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      const bonus = checkinStatus.todayBonus;
      showMessage(`签到成功！获得${bonus}积分`, 'success');
      
      setCheckinStatus(prev => ({
        ...prev,
        isCheckedIn: true,
        continuousStreak: prev.continuousStreak + 1,
        checkinTime: new Date().toISOString()
      }));
      
    } catch (error) {
      console.error('签到错误:', error);
      showMessage('签到失败，请重试', 'error');
    } finally {
      setIsCheckinLoading(false);
    }
  };

  const _handleLogout = () => {
    dispatch(logoutUser());
    showMessage('已退出登录', 'info');
  };

  const goToLogin = () => {
    navigate('/login');
  };

  // 功能按钮事件
  const goToRecords = () => {
    showMessage('排盘记录功能开发中...', 'info');
  };

  const goToProfile = () => {
    showMessage('个人档案功能开发中...', 'info');
  };

  const goToLearn = () => {
    showMessage('了解奇门功能开发中...', 'info');
  };

  const goToCoins = () => {
    showMessage('我的未币功能开发中...', 'info');
  };

  const followWechat = () => {
    showMessage('关注公众号功能开发中...', 'info');
  };

  const redeemCode = () => {
    showMessage('会员兑换码功能开发中...', 'info');
  };

  const contactService = () => {
    showMessage('客服与反馈功能开发中...', 'info');
  };

  const goToSettings = () => {
    showMessage('设置功能开发中...', 'info');
  };

  const aboutApp = () => {
    showMessage('关于功能开发中...', 'info');
  };

  useEffect(() => {
    // 组件初始化逻辑
    console.log('Profile页面初始化:', {
      isAuthenticated,
      user
    });
  }, [isAuthenticated, user]);

  return (
    <div className="profile-view">
      {/* 顶部用户信息区域 */}
      <div className="header-section">
        <div className="header-top">
          {isAuthenticated && !checkinStatus?.isCheckedIn && (
            <button 
              onClick={doCheckin} 
              className="header-checkin-btn"
              disabled={isCheckinLoading}
            >
              签到
            </button>
          )}
        </div>
        
        {isAuthenticated ? (
          <div className="user-profile">
            <div className="user-avatar">
              <span>{userInitial}</span>
            </div>
            <div className="user-info">
              <div className="user-name">{user?.username || '用户昵称昵称昵称'}</div>
              <div className="user-level">Lv1 {checkinStatus?.continuousStreak || 3}</div>
            </div>
            <div className="profile-arrow">›</div>
          </div>
        ) : (
          <div className="guest-profile" onClick={goToLogin}>
            <div className="guest-avatar">
              <span>?</span>
            </div>
            <div className="guest-info">
              <div className="guest-name">未登录</div>
              <div className="guest-desc">点击登录</div>
            </div>
            <div className="profile-arrow">›</div>
          </div>
        )}
      </div>

      {/* 快捷功能区域 */}
      <div className="quick-actions">
        <div className="action-item" onClick={goToRecords}>
          <div className="action-icon">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clipPath="url(#clip0_38_2368)">
                <rect width="28" height="28" rx="10" fill="url(#paint0_linear_38_2368)"/>
                <g clipPath="url(#clip1_38_2368)">
                  <path d="M13.9586 6.30865C9.72991 6.30865 6.29858 9.74065 6.29858 13.974L6.30058 14.1687C6.33294 15.4638 6.69317 16.7295 7.34757 17.8476C8.00198 18.9657 8.92921 19.8996 10.0426 20.562L10.0919 20.59L10.0512 20.528C9.61917 19.8407 9.37582 19.0518 9.34568 18.2406C9.31554 17.4294 9.49967 16.6246 9.87953 15.9072C10.2594 15.1898 10.8216 14.5851 11.5095 14.1541C12.1973 13.7231 12.9866 13.4809 13.7979 13.452L13.9539 13.4493C14.4266 13.4649 14.8976 13.3863 15.3396 13.2183C15.7817 13.0503 16.186 12.7961 16.529 12.4705C16.872 12.145 17.1469 11.7545 17.3377 11.3218C17.5285 10.8891 17.6315 10.4228 17.6406 9.94993C17.6497 9.47711 17.5647 9.00719 17.3907 8.56746C17.2166 8.12773 16.957 7.72697 16.6268 7.38844C16.2965 7.04991 15.9023 6.78037 15.4671 6.59546C15.0318 6.41055 14.5641 6.31396 14.0912 6.31131L13.9586 6.30865H13.9586ZM13.8932 8.58398C14.2181 8.58398 14.5297 8.71304 14.7594 8.94278C14.9892 9.17251 15.1182 9.48409 15.1182 9.80898C15.1182 10.1339 14.9892 10.4455 14.7594 10.6752C14.5297 10.9049 14.2181 11.034 13.8932 11.034C13.5684 11.034 13.2568 10.9049 13.027 10.6752C12.7973 10.4455 12.6682 10.1339 12.6682 9.80898C12.6682 9.48409 12.7973 9.17251 13.027 8.94278C13.2568 8.71304 13.5684 8.58398 13.8932 8.58398Z" fill="url(#paint1_linear_38_2368)"/>
                  <path d="M17.8347 7.35797L17.8754 7.41997C18.3074 8.10721 18.5508 8.89615 18.5809 9.70735C18.6111 10.5186 18.4269 11.3234 18.0471 12.0408C17.6672 12.7582 17.105 13.3628 16.4172 13.7939C15.7293 14.2249 14.94 14.467 14.1287 14.496L13.9727 14.4986C13.5001 14.4831 13.029 14.5616 12.587 14.7296C12.1449 14.8977 11.7406 15.1518 11.3976 15.4774C11.0546 15.803 10.7798 16.1935 10.5889 16.6262C10.3981 17.0589 10.2952 17.5252 10.2861 17.998C10.277 18.4708 10.3619 18.9408 10.5359 19.3805C10.71 19.8202 10.9696 20.221 11.2999 20.5595C11.6301 20.898 12.0243 21.1676 12.4595 21.3525C12.8948 21.5374 13.3625 21.634 13.8354 21.6366L13.968 21.6393C18.1967 21.6393 21.628 18.2073 21.628 13.974L21.626 13.7793C21.5937 12.4842 21.2335 11.2184 20.5791 10.1003C19.9246 8.98227 18.9974 8.04837 17.884 7.38597L17.8347 7.35797ZM13.7367 16.6913C13.9 16.6875 14.0623 16.7164 14.2143 16.7763C14.3662 16.8361 14.5046 16.9258 14.6214 17.0399C14.7382 17.154 14.831 17.2903 14.8944 17.4408C14.9578 17.5913 14.9904 17.753 14.9904 17.9163C14.9904 18.0796 14.9578 18.2413 14.8944 18.3918C14.831 18.5423 14.7382 18.6786 14.6214 18.7927C14.5046 18.9068 14.3662 18.9965 14.2143 19.0563C14.0623 19.1162 13.9 19.1451 13.7367 19.1413C13.4167 19.1339 13.1124 19.0016 12.8887 18.7727C12.665 18.5437 12.5397 18.2364 12.5397 17.9163C12.5397 17.5962 12.665 17.2889 12.8887 17.0599C13.1124 16.831 13.4167 16.6987 13.7367 16.6913Z" fill="url(#paint2_linear_38_2368)"/>
                </g>
              </g>
              <defs>
                <linearGradient id="paint0_linear_38_2368" x1="32.0833" y1="-10.5" x2="-9.33333" y2="17.5" gradientUnits="userSpaceOnUse">
                  <stop stopColor="#F2B47E"/>
                  <stop offset="1" stopColor="#F3C165"/>
                </linearGradient>
                <linearGradient id="paint1_linear_38_2368" x1="11.9699" y1="6.30866" x2="21.3708" y2="16.2153" gradientUnits="userSpaceOnUse">
                  <stop stopColor="white" stopOpacity="0.6"/>
                  <stop offset="1" stopColor="white"/>
                </linearGradient>
                <linearGradient id="paint2_linear_38_2368" x1="15.9567" y1="7.35797" x2="25.3576" y2="17.2646" gradientUnits="userSpaceOnUse">
                  <stop stopColor="white" stopOpacity="0.6"/>
                  <stop offset="1" stopColor="white"/>
                </linearGradient>
                <clipPath id="clip0_38_2368">
                  <rect width="28" height="28" fill="white"/>
                </clipPath>
                <clipPath id="clip1_38_2368">
                  <rect width="16" height="16" fill="white" transform="translate(6 6)"/>
                </clipPath>
              </defs>
            </svg>
          </div>
          <span>排盘记录</span>
        </div>
        
        <div className="action-item" onClick={goToProfile}>
          <div className="action-icon">
            <svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="0.333252" width="28" height="28" rx="10" fill="url(#paint0_linear_38_2378)"/>
              <path d="M20.1988 9.10368L18.3277 7.1674C17.5964 6.42061 16.6087 6.00112 15.5791 6H11.2149C10.1857 6.00075 9.19877 6.42234 8.47097 7.17219C7.74317 7.92204 7.33398 8.93885 7.33325 9.9993V18.0007C7.33398 19.0612 7.74317 20.078 8.47097 20.8278C9.19877 21.5777 10.1857 21.9993 11.2149 22H17.4516C18.4808 21.9993 19.4677 21.5777 20.1955 20.8278C20.9233 20.078 21.3325 19.0612 21.3333 18.0007V11.9201C21.3333 11.3968 21.2331 10.8787 21.0385 10.3954C20.8438 9.91211 20.5585 9.47315 20.1988 9.10368ZM16.7573 16.9291H12.1853C12.0309 16.9291 11.8828 16.8659 11.7736 16.7534C11.6644 16.6409 11.6031 16.4883 11.6031 16.3292C11.6031 16.1701 11.6644 16.0175 11.7736 15.905C11.8828 15.7925 12.0309 15.7293 12.1853 15.7293H16.7573C16.8337 15.7293 16.9094 15.7448 16.9801 15.7749C17.0507 15.8051 17.1149 15.8493 17.169 15.905C17.223 15.9607 17.2659 16.0268 17.2952 16.0996C17.3244 16.1724 17.3395 16.2504 17.3395 16.3292C17.3395 16.4079 17.3244 16.486 17.2952 16.5587C17.2659 16.6315 17.223 16.6977 17.169 16.7534C17.1149 16.8091 17.0507 16.8532 16.9801 16.8834C16.9094 16.9135 16.8337 16.9291 16.7573 16.9291ZM18.4425 11.9849H17.6498C17.0839 11.9837 16.5415 11.7516 16.1413 11.3394C15.7412 10.9271 15.5159 10.3683 15.5148 9.78525V8.96849C15.5148 8.80939 15.5762 8.6568 15.6854 8.5443C15.7946 8.4318 15.9427 8.3686 16.0971 8.3686C16.2515 8.3686 16.3996 8.4318 16.5088 8.5443C16.618 8.6568 16.6793 8.80939 16.6793 8.96849V9.78525C16.6793 9.91655 16.7044 10.0466 16.7532 10.1679C16.802 10.2892 16.8735 10.3994 16.9636 10.4922C17.0537 10.5851 17.1607 10.6587 17.2784 10.709C17.3961 10.7592 17.5223 10.7851 17.6498 10.7851H18.4425C18.5969 10.7851 18.745 10.8483 18.8542 10.9608C18.9634 11.0733 19.0247 11.2259 19.0247 11.385C19.0247 11.5441 18.9634 11.6967 18.8542 11.8092C18.745 11.9217 18.5969 11.9849 18.4425 11.9849Z" fill="url(#paint1_linear_38_2378)"/>
              <defs>
                <linearGradient id="paint0_linear_38_2378" x1="32.4166" y1="-10.5" x2="-9.00008" y2="17.5" gradientUnits="userSpaceOnUse">
                  <stop stopColor="#F2B47E"/>
                  <stop offset="1" stopColor="#F3C165"/>
                </linearGradient>
                <linearGradient id="paint1_linear_38_2378" x1="14.3333" y1="6" x2="24.7635" y2="18.1092" gradientUnits="userSpaceOnUse">
                  <stop stopColor="white" stopOpacity="0.6"/>
                  <stop offset="1" stopColor="white"/>
                </linearGradient>
              </defs>
            </svg>
          </div>
          <span>个人档案</span>
        </div>
        
        <div className="action-item" onClick={goToLearn}>
          <div className="action-icon">
            <svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clipPath="url(#clip0_38_2384)">
                <rect x="0.666748" width="28" height="28" rx="10" fill="url(#paint0_linear_38_2384)"/>
                <g clipPath="url(#clip1_38_2384)">
                  <path d="M7.87253 11.2387C7.87253 9.44978 9.35341 8 11.1796 8C13.0059 8 14.4867 9.44978 14.4867 11.2387C14.4867 13.0276 13.0059 14.4773 11.1796 14.4773C9.35341 14.4773 7.87253 13.0276 7.87253 11.2387ZM12.4179 20.1738V19.9498C12.4179 18.2978 13.2796 16.848 14.577 15.9924C13.9921 15.7093 13.3481 15.56 12.6947 15.56H9.9383C7.58008 15.56 5.66675 17.4329 5.66675 19.7444V20.0151C5.66675 20.9609 7.58008 20.9609 9.9383 20.9609H12.5734C12.4676 20.712 12.4147 20.4444 12.4179 20.1738ZM18.2885 10.1996C16.7734 10.1996 15.5445 11.4036 15.5445 12.8876C15.5445 14.3716 16.7734 15.5756 18.2885 15.5756C19.8036 15.5756 21.0325 14.3716 21.0325 12.8876C21.0325 11.4036 19.8036 10.1996 18.2885 10.1996ZM18.2885 10.1996C16.7734 10.1996 15.5445 11.4036 15.5445 12.8876C15.5445 14.3716 16.7734 15.5756 18.2885 15.5756C19.8036 15.5756 21.0325 14.3716 21.0325 12.8876C21.0325 11.4036 19.8036 10.1996 18.2885 10.1996ZM17.2587 16.4778C15.3019 16.4778 13.7121 18.0333 13.7121 19.9498V20.1738C13.7121 20.9578 15.2987 20.9578 17.2587 20.9578H19.5454C21.5023 20.9578 23.089 20.9298 23.089 20.1738V19.9498C23.089 18.0302 21.5023 16.4778 19.5454 16.4778H17.2587Z" fill="url(#paint1_linear_38_2384)"/>
                </g>
              </g>
              <defs>
                <linearGradient id="paint0_linear_38_2384" x1="32.7501" y1="-10.5" x2="-8.66659" y2="17.5" gradientUnits="userSpaceOnUse">
                  <stop stopColor="#F2B47E"/>
                  <stop offset="1" stopColor="#F3C165"/>
                </linearGradient>
                <linearGradient id="paint1_linear_38_2384" x1="14.3779" y1="8" x2="21.6667" y2="21" gradientUnits="userSpaceOnUse">
                  <stop stopColor="white" stopOpacity="0.6"/>
                  <stop offset="1" stopColor="white"/>
                </linearGradient>
                <clipPath id="clip0_38_2384">
                  <rect width="28" height="28" fill="white" transform="translate(0.666748)"/>
                </clipPath>
                <clipPath id="clip1_38_2384">
                  <rect width="17.4222" height="12.9609" fill="white" transform="translate(5.66675 8)"/>
                </clipPath>
              </defs>
            </svg>
          </div>
          <span>了解奇门</span>
        </div>
        
        <div className="action-item" onClick={goToCoins}>
          <div className="action-icon">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="28" height="28" rx="10" fill="url(#paint0_linear_38_2395)"/>
              <path d="M7.79604 11.1915C8.28565 11.4275 9.02041 11.6043 9.87706 11.7817C10.7963 11.9 11.7143 11.9592 12.7555 11.9592C13.7966 11.9592 14.7759 11.9 15.6332 11.7817C16.5518 11.6634 17.2253 11.4275 17.7149 11.1909C18.2045 10.9543 18.5109 10.6592 18.5109 10.3634V9.59577C18.5109 9.30002 18.2658 9.06341 17.7149 8.76831C17.2253 8.53171 16.4905 8.35425 15.6339 8.1768C14.8358 8.0598 13.8566 8 12.8154 8C11.7143 8 10.7957 8.0585 9.87773 8.17745C9.02041 8.35425 8.28565 8.53171 7.79604 8.76831C7.24514 9.00426 7 9.30002 7 9.59577V10.4226C7 10.6592 7.24514 10.9543 7.79604 11.1909V11.1915ZM12.6329 15.5635C11.4691 15.5635 10.4286 15.505 9.44873 15.3275C8.40822 15.1501 7.61286 14.9135 7 14.5586V15.622C7 15.9177 7.24514 16.1544 7.79604 16.4495C8.28565 16.6861 9.02041 16.8629 9.87706 17.041C10.6738 17.0995 11.5917 17.158 12.5103 17.158V16.6861C12.5103 16.3312 12.5709 15.9177 12.6329 15.5628V15.5635ZM9.44873 17.9276C8.40822 17.7501 7.61286 17.5135 7 17.1586V18.222C7 18.5178 7.24514 18.7544 7.79604 19.0495C8.28565 19.2861 9.02041 19.4629 9.87706 19.641C10.7957 19.758 11.7143 19.8178 12.7548 19.8178H13.6121C13.2451 19.3452 12.9386 18.8129 12.7548 18.222C11.5917 18.1635 10.4899 18.1044 9.44873 17.9269V17.9276ZM14.3469 12.9043C13.8573 12.9635 13.3064 12.9635 12.7548 12.9635C11.5917 12.9635 10.4899 12.905 9.44873 12.7275C8.59792 12.5881 7.7729 12.3291 7 11.9585L7 13.022C7 13.3184 7.24514 13.5543 7.79604 13.8501C8.28565 14.0867 9.02041 14.2635 9.87706 14.4416C10.7957 14.5586 11.7143 14.6184 12.7548 14.6184H12.9999C13.3064 13.9092 13.796 13.3769 14.3469 12.9043ZM20.7145 13.6726C18.9999 12.0184 16.1834 12.0184 14.4082 13.6726C12.6942 15.3275 12.6942 18.0452 14.4082 19.7593C16.1228 21.4136 18.9386 21.4136 20.7145 19.7593C22.4285 18.0452 22.4285 15.3275 20.7145 13.6726ZM18.5715 17.8093C18.1683 18.1978 17.8183 18.6347 17.5304 19.1093C17.2426 18.6348 16.8929 18.1979 16.4898 17.8093C16.0873 17.4203 15.6346 17.0827 15.1429 16.805C15.6346 16.5271 16.0873 16.1893 16.4898 15.8001C16.8929 15.4115 17.2426 14.9746 17.5304 14.5001C17.7755 14.9135 18.1432 15.3867 18.5715 15.8001C18.9741 16.1893 19.4268 16.527 19.9185 16.805C19.4902 16.9818 18.9999 17.3367 18.5715 17.8093Z" fill="url(#paint1_linear_38_2395)"/>
              <defs>
                <linearGradient id="paint0_linear_38_2395" x1="32.0833" y1="-10.5" x2="-9.33333" y2="17.5" gradientUnits="userSpaceOnUse">
                  <stop stopColor="#F2B47E"/>
                  <stop offset="1" stopColor="#F3C165"/>
                </linearGradient>
                <linearGradient id="paint1_linear_38_2395" x1="9" y1="8" x2="22" y2="21" gradientUnits="userSpaceOnUse">
                  <stop stopColor="white" stopOpacity="0.6"/>
                  <stop offset="1" stopColor="white"/>
                </linearGradient>
              </defs>
            </svg>
          </div>
          <span>我的未币</span>
        </div>
      </div>

      {/* 更多服务功能列表 */}
      <div className="service-card">
        <div className="service-header">更多服务</div>
        
        <div className="service-item" onClick={followWechat}>
          <div className="service-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16.6875 2.75C14.7516 2.75 13.0566 3.5825 12 4.98969C10.9434 3.5825 9.24844 2.75 7.3125 2.75C5.77146 2.75174 4.29404 3.36468 3.20436 4.45436C2.11468 5.54404 1.50174 7.02146 1.5 8.5625C1.5 15.125 11.2303 20.4369 11.6447 20.6562C11.7539 20.715 11.876 20.7458 12 20.7458C12.124 20.7458 12.2461 20.715 12.3553 20.6562C12.7697 20.4369 22.5 15.125 22.5 8.5625C22.4983 7.02146 21.8853 5.54404 20.7956 4.45436C19.706 3.36468 18.2285 2.75174 16.6875 2.75Z" fill="#E6BA9A"/>
              <circle cx="18" cy="16" r="5" fill="white"/>
              <circle cx="18" cy="16" r="4" fill="#E6BA9A"/>
              <line x1="16.5" y1="16" x2="19.5" y2="16" stroke="white" strokeLinecap="round"/>
              <line x1="0.5" y1="-0.5" x2="3.5" y2="-0.5" transform="matrix(0 -1 -1 0 17.5 18)" stroke="white" strokeLinecap="round"/>
            </svg>
          </div>
          <span className="service-name">关注公众号</span>
          <div className="service-arrow">›</div>
        </div>

        <div className="service-item" onClick={redeemCode}>
          <div className="service-icon">
            <svg width="21" height="18" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20.1473 4.65101C19.854 4.50724 19.5214 4.46413 19.2011 4.52836C18.8808 4.59259 18.5906 4.76057 18.3754 5.00633L15.2189 8.40851L11.8626 0.881326C11.8624 0.878203 11.8624 0.875074 11.8626 0.871951C11.7426 0.611651 11.5505 0.391187 11.3091 0.236656C11.0677 0.082126 10.7871 0 10.5004 0C10.2138 0 9.93315 0.082126 9.69174 0.236656C9.45033 0.391187 9.25824 0.611651 9.13823 0.871951C9.13839 0.875074 9.13839 0.878203 9.13823 0.881326L5.78198 8.40851L2.62542 5.00633C2.40882 4.76052 2.11771 4.59239 1.79656 4.52762C1.47541 4.46285 1.14189 4.505 0.846953 4.64763C0.552016 4.79026 0.311886 5.02553 0.163254 5.31749C0.0146216 5.60945 -0.0343384 5.94205 0.0238548 6.26445C0.0238548 6.27476 0.0238548 6.28414 0.0304173 6.29445L2.15667 16.0323C2.22212 16.3752 2.40512 16.6845 2.67413 16.907C2.94315 17.1294 3.28133 17.2511 3.63042 17.251H17.3714C17.7203 17.2509 18.0582 17.1291 18.3271 16.9067C18.5959 16.6842 18.7787 16.375 18.8442 16.0323L20.9704 6.29445C20.9704 6.28414 20.9704 6.27476 20.977 6.26445C21.0363 5.94165 20.987 5.60829 20.837 5.31641C20.6869 5.02453 20.4444 4.79056 20.1473 4.65101Z" fill="#E6BA9A"/>
            </svg>
          </div>
          <span className="service-name">会员兑换码</span>
          <div className="service-arrow">›</div>
        </div>

        <div className="service-item" onClick={contactService}>
          <div className="service-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18.9272 5.12437C18.03 4.21817 16.9629 3.49783 15.7869 3.0046C14.611 2.51137 13.3493 2.25494 12.0741 2.25H12C9.41414 2.25 6.93419 3.27723 5.10571 5.10571C3.27723 6.93419 2.25 9.41414 2.25 12V17.25C2.25 17.8467 2.48705 18.419 2.90901 18.841C3.33097 19.2629 3.90326 19.5 4.5 19.5H6C6.59674 19.5 7.16903 19.2629 7.59099 18.841C8.01295 18.419 8.25 17.8467 8.25 17.25V13.5C8.25 12.9033 8.01295 12.331 7.59099 11.909C7.16903 11.4871 6.59674 11.25 6 11.25H3.78375C3.92839 9.68619 4.51578 8.196 5.47709 6.9541C6.43839 5.71219 7.73377 4.77003 9.21141 4.23803C10.689 3.70603 12.2877 3.60624 13.82 3.95035C15.3524 4.29446 16.7548 5.06822 17.8631 6.18094C19.2177 7.54247 20.0509 9.33662 20.2172 11.25H18C17.4033 11.25 16.831 11.4871 16.409 11.909C15.9871 12.331 15.75 12.9033 15.75 13.5V17.25C15.75 17.8467 15.9871 18.419 16.409 18.841C16.831 19.2629 17.4033 19.5 18 19.5H20.25C20.25 20.0967 20.0129 20.669 19.591 21.091C19.169 21.5129 18.5967 21.75 18 21.75H12.75C12.5511 21.75 12.3603 21.829 12.2197 21.9697C12.079 22.1103 12 22.3011 12 22.5C12 22.6989 12.079 22.8897 12.2197 23.0303C12.3603 23.171 12.5511 23.25 12.75 23.25H18C18.9946 23.25 19.9484 22.8549 20.6517 22.1516C21.3549 21.4484 21.75 20.4946 21.75 19.5V12C21.7549 10.7246 21.5081 9.46077 21.0237 8.28093C20.5393 7.10108 19.8268 6.02841 18.9272 5.12437Z" fill="#E6BA9A"/>
            </svg>
          </div>
          <span className="service-name">客服与反馈</span>
          <div className="service-arrow">›</div>
        </div>

        <div className="service-item" onClick={goToSettings}>
          <div className="service-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.9999 7.50001C11.1099 7.50001 10.2399 7.76393 9.49987 8.2584C8.75985 8.75287 8.18307 9.45567 7.84248 10.2779C7.50188 11.1002 7.41277 12.005 7.5864 12.8779C7.76003 13.7508 8.18862 14.5527 8.81795 15.182C9.44729 15.8113 10.2491 16.2399 11.122 16.4135C11.9949 16.5872 12.8997 16.4981 13.722 16.1575C14.5443 15.8169 15.2471 15.2401 15.7415 14.5001C16.236 13.7601 16.4999 12.89 16.4999 12C16.4987 10.8069 16.0242 9.66305 15.1805 8.8194C14.3369 7.97576 13.193 7.50125 11.9999 7.50001ZM11.9999 15C11.4066 15 10.8266 14.8241 10.3332 14.4944C9.83988 14.1648 9.45536 13.6962 9.2283 13.1481C9.00123 12.5999 8.94182 11.9967 9.05758 11.4147C9.17333 10.8328 9.45906 10.2983 9.87861 9.87869C10.2982 9.45914 10.8327 9.17341 11.4147 9.05766C11.9966 8.9419 12.5998 9.00131 13.148 9.22837C13.6962 9.45544 14.1647 9.83995 14.4943 10.3333C14.824 10.8266 14.9999 11.4067 14.9999 12C14.9999 12.7957 14.6839 13.5587 14.1213 14.1213C13.5586 14.6839 12.7956 15 11.9999 15ZM22.3068 10.051C22.2859 9.94534 22.2425 9.84546 22.1796 9.7581C22.1167 9.67075 22.0357 9.59796 21.9421 9.5447L19.1456 7.95095L19.1343 4.79907C19.134 4.69053 19.1101 4.58334 19.0643 4.48493C19.0185 4.38652 18.9518 4.29922 18.869 4.22908C17.8546 3.37098 16.6864 2.71339 15.4265 2.29126C15.3273 2.25768 15.2221 2.24525 15.1178 2.25478C15.0135 2.26431 14.9124 2.29558 14.8209 2.34658L11.9999 3.92345L9.17618 2.34376C9.08464 2.29248 8.98335 2.26097 8.87887 2.25128C8.77439 2.24159 8.66904 2.25394 8.56962 2.28751C7.3107 2.71272 6.14383 3.37282 5.13087 4.23283C5.04815 4.30287 4.9816 4.39002 4.9358 4.48826C4.89 4.5865 4.86603 4.6935 4.86556 4.80189L4.8515 7.95658L2.05493 9.55033C1.96137 9.60359 1.88038 9.67637 1.81745 9.76373C1.75452 9.85108 1.71114 9.95096 1.69025 10.0566C1.43431 11.3427 1.43431 12.6667 1.69025 13.9528C1.71114 14.0584 1.75452 14.1583 1.81745 14.2457C1.88038 14.333 1.96137 14.4058 2.05493 14.4591L4.8515 16.0528L4.86275 19.2047C4.86309 19.3132 4.88699 19.4204 4.93279 19.5188C4.9786 19.6173 5.04522 19.7045 5.12806 19.7747C6.1425 20.6328 7.31071 21.2904 8.57056 21.7125C8.66977 21.7461 8.77492 21.7585 8.87923 21.749C8.98354 21.7395 9.08469 21.7082 9.17618 21.6572L11.9999 20.0766L14.8237 21.6563C14.9354 21.7185 15.0614 21.7508 15.1893 21.75C15.2712 21.75 15.3526 21.7367 15.4302 21.7106C16.689 21.286 17.8559 20.6265 18.869 19.7672C18.9517 19.6972 19.0183 19.61 19.0641 19.5118C19.1099 19.4135 19.1338 19.3065 19.1343 19.1981L19.1484 16.0435L21.9449 14.4497C22.0385 14.3964 22.1195 14.3237 22.1824 14.2363C22.2453 14.1489 22.2887 14.0491 22.3096 13.9434C22.5641 12.6583 22.5632 11.3357 22.3068 10.051Z" fill="#E6BA9A"/>
              <path d="M12 7.5C11.11 7.5 10.24 7.76392 9.49994 8.25839C8.75991 8.75285 8.18314 9.45566 7.84254 10.2779C7.50195 11.1002 7.41283 12.005 7.58647 12.8779C7.7601 13.7508 8.18868 14.5526 8.81802 15.182C9.44736 15.8113 10.2492 16.2399 11.1221 16.4135C11.995 16.5872 12.8998 16.4981 13.7221 16.1575C14.5443 15.8169 15.2471 15.2401 15.7416 14.5001C16.2361 13.76 16.5 12.89 16.5 12C16.4988 10.8069 16.0243 9.66304 15.1806 8.81939C14.337 7.97575 13.1931 7.50124 12 7.5Z" fill="white"/>
            </svg>
          </div>
          <span className="service-name">设置</span>
          <div className="service-arrow">›</div>
        </div>

        <div className="service-item" onClick={aboutApp}>
          <div className="service-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96452 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46927 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25Z" fill="#E6BA9A"/>
              <path d="M13.5 16.5C13.5 16.6989 13.421 16.8897 13.2803 17.0303C13.1397 17.171 12.9489 17.25 12.75 17.25C12.3522 17.25 11.9706 17.092 11.6893 16.8107C11.408 16.5294 11.25 16.1478 11.25 15.75V12C11.0511 12 10.8603 11.921 10.7197 11.7803C10.579 11.6397 10.5 11.4489 10.5 11.25C10.5 11.0511 10.579 10.8603 10.7197 10.7197C10.8603 10.579 11.0511 10.5 11.25 10.5C11.6478 10.5 12.0294 10.658 12.3107 10.9393C12.592 11.2206 12.75 11.6022 12.75 12V15.75C12.9489 15.75 13.1397 15.829 13.2803 15.9697C13.421 16.1103 13.5 16.3011 13.5 16.5ZM10.5 7.875C10.5 7.6525 10.566 7.43499 10.6896 7.24998C10.8132 7.06498 10.9889 6.92078 11.1945 6.83564C11.4 6.75049 11.6262 6.72821 11.8445 6.77162C12.0627 6.81503 12.2632 6.92217 12.4205 7.07951C12.5778 7.23684 12.685 7.4373 12.7284 7.65552C12.7718 7.87375 12.7495 8.09995 12.6644 8.30552C12.5792 8.51109 12.435 8.68679 12.25 8.8104C12.065 8.93402 11.8475 9 11.625 9C11.3266 9 11.0405 8.88147 10.8295 8.6705C10.6185 8.45952 10.5 8.17337 10.5 7.875Z" fill="white"/>
            </svg>
          </div>
          <span className="service-name">关于</span>
          <div className="service-arrow">›</div>
        </div>
      </div>

      {/* 退出登录按钮 */}
      {/* {isAuthenticated && (
        <div className="logout-section">
          <button onClick={handleLogout} className="logout-btn">退出登录</button>
        </div>
      )} */}

      {/* 提示消息 */}
      {message && (
        <div className={`message ${messageType}`}>
          {message}
        </div>
      )}
    </div>
  );
};

export default ProfilePage;