# ä¸æœªå¥‡é—¨éç”²ç³»ç»Ÿ - é¡¹ç›®æ¶æ„è§„åˆ™ (2024ä¼˜åŒ–ç‰ˆ)

## ğŸ—ï¸ ä¼˜åŒ–åçš„é¡¹ç›®æ¶æ„

æœ¬é¡¹ç›®å·²å®Œæˆ**å…¨é¢æ¶æ„é‡æ„**ï¼Œé‡‡ç”¨ç°ä»£åŒ–æ¨¡å—åˆ†ç¦»è®¾è®¡ï¼š

### âš ï¸ é‡è¦æ›´æ–°
- **æ–°æ¶æ„**: é‡‡ç”¨ `apps/` ç›®å½•åˆ†ç¦»å‰åç«¯åº”ç”¨
- **ç»Ÿä¸€å…¥å£**: [apps/backend/app.js](mdc:apps/backend/app.js) æ˜¯å”¯ä¸€åç«¯å…¥å£æ–‡ä»¶
- **åŒå‰ç«¯æ”¯æŒ**: Vue.js å’Œ React ä¸¤ä¸ªå‰ç«¯ç‰ˆæœ¬å¹¶å­˜
- **é…ç½®é›†ä¸­**: æ‰€æœ‰é…ç½®æ–‡ä»¶ç§»è‡³ [config/](mdc:config) ç›®å½•
- **æ–‡æ¡£å®Œå–„**: æ‰€æœ‰æ–‡æ¡£ç§»è‡³ [docs/](mdc:docs) ç›®å½•

## ğŸ“ æ ¸å¿ƒæ¶æ„

```
yunque-qimen/
â”œâ”€â”€ apps/                           # ğŸš€ åº”ç”¨ç¨‹åºç›®å½•
â”‚   â”œâ”€â”€ backend/                    # ğŸ”§ åç«¯åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ app.js                  # ç»Ÿä¸€å…¥å£ç‚¹ (å”¯ä¸€æœåŠ¡å™¨æ–‡ä»¶)
â”‚   â”‚   â”œâ”€â”€ src/                    # ğŸ“¦ æ¨¡å—åŒ–ç»„ä»¶ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ config/             # âš™ï¸ é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AppConfig.js    # ç¯å¢ƒå˜é‡å’Œé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ services/           # ğŸ”§ ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PointsService.js    # ğŸ’° ç§¯åˆ†ç³»ç»ŸæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AIService.js        # ğŸ¤– AIåˆ†ææœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ InviteCodeService.js # ğŸ« é‚€è¯·ç æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/         # ğŸ›¡ï¸ ä¸­é—´ä»¶å±‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.js        # è®¤è¯ã€é™æµã€å®‰å…¨ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ database/           # ğŸ—„ï¸ æ•°æ®åº“å±‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ init.js         # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/             # ğŸ›£ï¸ è·¯ç”±æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ qimen.js        # å¥‡é—¨éç”²è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ analysis.js     # AIåˆ†æè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ agents/             # ğŸ¤– æ™ºèƒ½ä»£ç†
â”‚   â”‚   â”‚       â””â”€â”€ QimenAgent.js   # å¥‡é—¨éç”²AIä»£ç†
â”‚   â”‚   â”œâ”€â”€ prisma/                 # ğŸ“Š æ•°æ®åº“æ¨¡å¼
â”‚   â”‚   â”‚   â””â”€â”€ schema.prisma       # æ•°æ®åº“æ¨¡å¼å®šä¹‰
â”‚   â”‚   â””â”€â”€ package.json            # ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ frontend-vue/               # ğŸ¨ Vue.jså‰ç«¯
â”‚   â”‚   â”œâ”€â”€ src/                    # Vue.jsæºä»£ç 
â”‚   â”‚   â”œâ”€â”€ ios/                    # iOSç§»åŠ¨ç«¯
â”‚   â”‚   â””â”€â”€ package.json            # Vueå‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ frontend-react/             # âš›ï¸ Reactå‰ç«¯
â”‚       â”œâ”€â”€ src/                    # Reactæºä»£ç 
â”‚       â”œâ”€â”€ android/                # Androidç§»åŠ¨ç«¯
â”‚       â”œâ”€â”€ ios/                    # iOSç§»åŠ¨ç«¯
â”‚       â””â”€â”€ package.json            # Reactå‰ç«¯ä¾èµ–
â”œâ”€â”€ config/                         # âš™ï¸ é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ deploy.sh                   # æ ‡å‡†éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy-fix.sh               # ä¿®å¤ç‰ˆéƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ docker-compose.yml          # Dockeré…ç½®
â”œâ”€â”€ docs/                           # ğŸ“š é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„æ–‡æ¡£
â”‚   â””â”€â”€ FEATURE_SUMMARY.md          # åŠŸèƒ½æ€»ç»“
â””â”€â”€ start-dev.sh                    # ğŸš€ å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨è„šæœ¬
```

## ğŸš€ å¯åŠ¨æ–¹å¼

### æ¨èï¼šä½¿ç”¨ç»Ÿä¸€å¯åŠ¨è„šæœ¬
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
./start-dev.sh install

# å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆäº¤äº’å¼é€‰æ‹©ï¼‰
./start-dev.sh start
```

### æ‰‹åŠ¨å¯åŠ¨å„åº”ç”¨

#### åç«¯å¯åŠ¨
```bash
cd apps/backend
node app.js                         # å¼€å‘ç¯å¢ƒ
NODE_ENV=production node app.js     # ç”Ÿäº§ç¯å¢ƒ
```

#### Vueå‰ç«¯å¯åŠ¨
```bash
cd apps/frontend-vue
npm run dev                         # å¼€å‘ç¯å¢ƒ
npm run build                       # ç”Ÿäº§æ„å»º
```

#### Reactå‰ç«¯å¯åŠ¨
```bash
cd apps/frontend-react
npm run dev                         # å¼€å‘ç¯å¢ƒ 
npm run build                       # ç”Ÿäº§æ„å»º
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - JWT tokenè®¤è¯ï¼Œé‚€è¯·ç æ³¨å†Œ
2. **ç§¯åˆ†ç®¡ç†ç³»ç»Ÿ** - äº‹åŠ¡å®‰å…¨çš„ç§¯åˆ†æ“ä½œï¼Œç­¾åˆ°å¥–åŠ±
3. **å¥‡é—¨éç”²æ’ç›˜** - ä¼ ç»Ÿæ’ç›˜ç®—æ³•å®ç°
4. **AIæ™ºèƒ½åˆ†æ** - å¤šç­–ç•¥AIåˆ†æï¼ˆç®€å•/è¯¦ç»†/æµå¼ï¼‰
5. **å†å²è®°å½•ç³»ç»Ÿ** - è‡ªåŠ¨ä¿å­˜ï¼Œæ™ºèƒ½æœç´¢
6. **æ”¶è—å¤¹åŠŸèƒ½** - é‡è¦åˆ†ææ”¶è—ç®¡ç†
7. **ç§»åŠ¨ç«¯æ”¯æŒ** - iOS/AndroidåŸç”Ÿåº”ç”¨

## ğŸ“‹ é‡è¦é…ç½®æ–‡ä»¶

### åç«¯é…ç½®
- [apps/backend/app.js](mdc:apps/backend/app.js) - ç»Ÿä¸€åº”ç”¨å…¥å£
- [apps/backend/src/config/AppConfig.js](mdc:apps/backend/src/config/AppConfig.js) - åº”ç”¨é…ç½®ç®¡ç†
- [apps/backend/prisma/schema.prisma](mdc:apps/backend/prisma/schema.prisma) - æ•°æ®åº“æ¨¡å¼
- [apps/backend/package.json](mdc:apps/backend/package.json) - åç«¯ä¾èµ–ç®¡ç†

### å‰ç«¯é…ç½®
- [apps/frontend-vue/package.json](mdc:apps/frontend-vue/package.json) - Vueå‰ç«¯ä¾èµ–
- [apps/frontend-react/package.json](mdc:apps/frontend-react/package.json) - Reactå‰ç«¯ä¾èµ–
- [apps/frontend-vue/capacitor.config.ts](mdc:apps/frontend-vue/capacitor.config.ts) - Vueç§»åŠ¨ç«¯é…ç½®
- [apps/frontend-react/capacitor.config.ts](mdc:apps/frontend-react/capacitor.config.ts) - Reactç§»åŠ¨ç«¯é…ç½®

### éƒ¨ç½²é…ç½®
- [config/deploy.sh](mdc:config/deploy.sh) - æ ‡å‡†éƒ¨ç½²è„šæœ¬
- [config/deploy-fix.sh](mdc:config/deploy-fix.sh) - ä¿®å¤ç‰ˆéƒ¨ç½²è„šæœ¬
- [config/docker-compose.yml](mdc:config/docker-compose.yml) - Dockerå®¹å™¨é…ç½®

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- JWTè®¤è¯ä¸­é—´ä»¶ç»Ÿä¸€ç®¡ç†
- å·®å¼‚åŒ–APIé™æµç­–ç•¥  
- è¾“å…¥éªŒè¯å’Œå®‰å…¨è¿‡æ»¤
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- é‚€è¯·ç æ³¨å†Œæ§åˆ¶
- ç”¨æˆ·æƒé™éš”ç¦»

## ğŸ“± ç§»åŠ¨ç«¯æ”¯æŒ

### Vueå‰ç«¯ç§»åŠ¨ç«¯
- **å¹³å°**: iOS + Android
- **æŠ€æœ¯**: Capacitor 7.x
- **æ„å»º**: `cd apps/frontend-vue && npm run build:mobile`

### Reactå‰ç«¯ç§»åŠ¨ç«¯
- **å¹³å°**: iOS + Android  
- **æŠ€æœ¯**: Capacitor 6.x
- **æ„å»º**: `cd apps/frontend-react && npm run build:mobile`

## ğŸ¨ å¼€å‘è§„èŒƒ

### æ–°åŠŸèƒ½å¼€å‘
- åç«¯åŠŸèƒ½åœ¨ [apps/backend/src/](mdc:apps/backend/src) ç›®å½•ä¸‹æ¨¡å—åŒ–å¼€å‘
- è·¯ç”±æ–‡ä»¶æ”¾åœ¨ [apps/backend/src/routes/](mdc:apps/backend/src/routes)
- æœåŠ¡é€»è¾‘æ”¾åœ¨ [apps/backend/src/services/](mdc:apps/backend/src/services)
- å‰ç«¯åŠŸèƒ½åˆ†åˆ«åœ¨ä¸¤ä¸ªå‰ç«¯é¡¹ç›®ä¸­å®ç°

### ä»£ç ç»„ç»‡
- **å•ä¸€å…¥å£**: åç«¯åªä½¿ç”¨ `apps/backend/app.js`
- **æ¨¡å—åˆ†ç¦»**: å‰åç«¯å®Œå…¨ç‹¬ç«‹ï¼Œå¯å•ç‹¬éƒ¨ç½²
- **é…ç½®é›†ä¸­**: æ‰€æœ‰ç¯å¢ƒé…ç½®ç»Ÿä¸€ç®¡ç†
- **æ–‡æ¡£åŒæ­¥**: é‡è¦å˜æ›´åŠæ—¶æ›´æ–°æ–‡æ¡£
