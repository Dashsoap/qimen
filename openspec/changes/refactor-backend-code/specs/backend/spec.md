# 后端架构 Delta (重构提案 - 无功能变更)

## 说明
本次重构**不涉及功能变更或新增需求**，纯粹是代码组织和结构优化。
因此不需要 ADDED/MODIFIED/REMOVED Requirements。

重构目标：
1. 提高代码可维护性
2. 降低文件复杂度
3. 改进代码组织结构
4. 移除未使用代码
5. 统一编码规范

重构原则：
- 保持所有 API 接口不变
- 保持所有功能行为不变
- 保持数据库 schema 不变
- 仅改进内部实现

## 重构范围

### 代码拆分
- AIService (892行) → 多个策略类 (~200行/文件)
- AuthController (493行) → Controller + Service (~150行/文件)
- validation/schemas (623行) → 5个模块文件 (~100行/文件)
- middleware/index (439行) → 4个中间件文件 (~100行/文件)

### 代码清理
- 移除 WeiCoinService (431行未使用代码)
- 清理注释掉的代码
- 统一 import/export 风格

### 代码组织
- 提取 AI prompt 模板到独立目录
- 创建工具函数模块
- 统一错误处理和响应格式

## 验证标准
- [ ] 所有现有 API 测试通过
- [ ] 没有新增 linter 错误
- [ ] 代码覆盖率不降低
- [ ] 性能指标不下降
- [ ] 所有环境变量正常工作


