import { createSlice, PayloadAction } from '@reduxjs/toolkit';

// 从React版本复制的解释信息
const palaceMeanings:Record<string, string> = {
  // Palace names and meanings
  '乾宫': '乾金之卦，其体属金。性刚而好斗，所主者，名正言顺之事，为至极之神。若得门得奇，万福咸吉。不得奇得门，也不为凶。威捍之神，利扬兵布阵，行军出兵，利鼓呐喊，张扬，公开，飞鸟，飞机，航天。',
  '坎宫': '坎為水，禀北方水，为奸谗小盗之神。性好阴谋贼害，司盗贼逃亡口舌之事。须提防奸细盗贼。得奇门则无妨。',
  '艮宫': '艮為山，坤土之象，万物之母。为坚牢之神，性柔好静。九地之方，可以屯兵固守。',
  '震宫': '震為雷，雷厉风行，敢作敢为，爽快，泼辣。突然间出现的事。冲动、莽撞。',
  '巽宫': '巽為風，仁慈、慈爱、教化、多愁善感。没主见、三心二意，郁郁寡欢。',
  '离宫': '離為火，禀南方火，为虚诈之神。性柔而口毒，司惊恐怪异之事。出腾蛇之方主精神恍惚，恶梦惊悸，得使得门则无妨。',
  '坤宫': '坤為地，禀西方金，为凶恶刚猛之神。性好杀，司兵戈争斗杀伐病死。须防敌方偷袭。得奇门无忌。',
  '兑宫': '兌為澤，其开朗平和，利交易，谈判，中介，合作等。又主华彩，车，书，酒食，宴会，婚姻等。',
  '中宫': '禀中央土，为天乙之神，诸神之首，所到之处，百恶消散。事急可从值符所进临之方出，此谓"急则从神"。',
  
  // Gates meanings
  '休门': '休门居北方坎宫，属水。坎水得乾金之生，于人为中男，上有兄下有弟，从容休闲；又坎宫处冬季最寒冷季节，万物休息冬眠，故古人命名为休门，乃休养生息之地。为吉利之门。\n\n主贵人，有贵人相帮。休闲之人，测人，为公务员，办公室，接待性事务性工作，退休，落衰地为闲散人员。禄地临休门，为公务员。测事情进度，则不吉，着急做不了。',
  '生门': '生门属土，居东北方艮宫，正当立春之生，万物复苏，阳气回转，土生万物，所以古人命名为生门，大吉大利之门。\n\n主房子、土地、生意。求财吉。田产、资本、效益。测疾病，遇外伤是好事，有生机能愈合。遇内病则不吉，癌症，肿块之类的病会继续生长。',
  '伤门': '伤门居东方震宫，五行属木，正当卯月春分之后甲木帝旺之时，旺则易折；震卦主动，动则易伤；元帅甲子常隐于戊土之下，子与卯相刑，刑则受伤，故古人将与震宫对应的八门命名为伤门。伤门属凶门，主人遭疾病刑伤之象。\n\n有能力，压力大，心情不好。代表受伤害，疾病，斗打等。\n\n不利经商、出行、赴任、修造、嫁娶，经商易破财，出入容易得病遇灾受伤，招惹是非。但收款索债效果很好；又宜于打猎和捕捉盗贼。伤门为木神，临坤二宫，艮八宫为木克土，大凶。凶门被迫(凶门临被克之宫)，则凶事尤甚。',
  '杜门': '杜门居东南巽宫，属木。巽为长女，受乾父之冲克，又克坤母，与父母皆不和，故在家中处事阻塞不利；又巽宫有辰土，既是水墓、土墓又是辛金之墓。\n\n保密、不公开，闭塞不通，堵住了。杜字，画地为牢之意。代表监察、监督机关、执法机构、技术部门等等。',
  '景门': '景门居南方离宫，属火。在家中为中女，在乾金为父，与丈夫中男坎水对冲，易动口舌，常有血光之事；又景门正当日升中天、大放光明之时，但烈日炎炎，虽夏季景色美丽，但难免有酷暑之忧；又景门所在离宫正南与正北坎宫休门相对，一个万物闭藏休息，一个万物繁茂争长，故古人命名为景门。\n\n信息、音讯、消息。临景门，等待消息、音讯。代表工作计划，市场信息、电子电器、动画、电视。逢景门旺相出是非。代表道路，看出行路上有什么事，看景门，因为景门为音讯，而不是看庚。\n\n景门多主文书之事。景门临六，七宫主凶。',
  '死门': '死门居西南坤宫，属土。死门与艮宫生门相对，万物春生秋死，春种秋收，故命名为死门。\n\n不高兴，事物没生机。死人，坟墓，土地，办事不成，不痛快，心情不好。看阴宅用死门。\n\n出入此门，百事为凶，忌出行，修造，谋事，否则伤人损财。宜渔猎，行刑，吊丧。死门为土神，临一宫则主大凶。',
  '惊门': '惊门居西方兑位，属金。正当秋分、寒露、霜降之时，金秋寒气肃杀，草木面临凋蔽，一片惊恐萧瑟之象；又兑卦为泽，为缺，为破损；又兑主口，主口舌官非，故古人将此门命名为惊门，与东方震宫伤门相对应。\n\n心情不好，有担心的事，恐慌、口舌是非，心惊肉跳。代表律师，教师，唱歌的等等。\n\n凶门。不宜出行谋事，否则必遇惊恐；但宜寻求走失，追捕逃亡。惊门为金神，临三，四宫主大凶。惊门惊惶忧惧，多生怪异。',
  '开门': '开门居西北乾宫，五行属金。乾卦是八卦之首，为天为父，于社会之首长；乾纳甲壬，乾位有亥，亥为甲木长生之地，甲又为十干之首，所以古人对应乾宫的门命名为开门，喻万物开始之意，为大吉大利之门。\n\n为打开的、开始。为有开口的东西。为开阔进取之人。为开心的人。为正在开口讲话的人等等。\n\n开门首先想到的是金属多的地方，炼钢厂，金银首饰店、铁轨、器械厂等等。',
  
  // Stars meanings  
  '天蓬': '原名贪狼星，与北方一宫坎卦相对应，阳星，五行属水。坎水正当隆冬季节，至寒至冷至暗，喜阴害阳，人们认为它和盗贼出没有关，所以把它称为凶星、盗星。\n\n主破财，冒险之事，见蓬必有风险，做贸易的见蓬多。指投资风险。测人不是好人，测事为破财被盗、抢了。',
  '天芮': '原名巨门星，与西南方二宫坤卦相对应，阴星，五行属土。因与八门中死门相对应，认为它的出没与疾病流行有关，所以把它称为病星、凶星，奇门预测疾病一般以它为用神，看它落在何宫及其旺相休囚，来定病的部位及轻重愈后状况。\n\n疾病、伤灾。临天芮都有毛病。贪婪、大资本家、大财主，有田地庄园。',
  '天冲': '原名禄存星，与东方三宫震卦相对应，阳星，五行属木。人们认为它有慈心造化，助人为乐之德，与农事活动有关，故把它称为吉星，但吉利程度不如天心、天任、天辅三星，所以有人叫它次吉之星。\n\n代表有能力，顶梁柱，没他不行。放在哪儿都能撑起局面。有创造力，也有破坏力。口才好。',
  '天辅': '原名左辅星，与东北八宫艮卦相对应，阳星，五行属土。人们认为土能生万物，又正当春季万物萌生之时，故称之为吉星。\n\n有才华，攻于心计，有心眼，能屈能伸，管理型人员。指医生，医药。死门见心，出医生。',
  '天禽': '原名文曲星，与东南四宫巽卦相对应，阳星，五行属木。人们认为它是天上的文曲星，与文化教育事业有关，故称为大吉之星。',
  '天心': '原名武曲星，与四宫天辅星文曲星相对，处西北六宫乾位，阴星，五行属金。人们认为它能动能静，与乾卦为天为父为首长相应，长天心计，和领导才能、军事指挥、医疗治病有关，故称为大吉之星。',
  '天柱': '原名破军星，与西方七宫兑卦相对应，阴星，五行属金。人们认为它正当金秋肃杀之时，喜杀好战，与惊恐怪异、破坏毁折有关，故名为凶星。\n\n代表官司，牵连，惊恐怪异，变化多端，羁留盘诘，虚伪，做梦，绳索，链条，捆绑，心狠手辣，罗网，牵缠，一切细长物品，妖魔鬼魅，虚幻不实，心惊肉跳等。',
  '天任': '原名右弼星，与同方九宫离卦相对应，阴星，五行属火。人们认为天英星居离宫之位，烈火炎炎，性躁易暴，虽然如日升中天，在放光明，但又和血光之灾有关，故称为中平之星，或小凶之星。\n\n测合作，一方临蛇，不可信，也代表事物的牵连。测病，易神经出问题。',
  '天英': '原名文曲星，与东南四宫巽卦相对应，阳星，五行属木。人们认为它是天上的文曲星，与文化教育事业有关，故称为大吉之星。\n\n生旺，有名声，有名利。测终生，天英旺有名。落艮宫不吉，有名不想出名。落坤宫，全国出名，因坤主大地，主小百姓。急躁、暴躁。配合不当出坏名声，易发火，没有沉稳性。',
  
  // Divine (神煞) meanings
  '值符': '禀中央土，为天乙之神，诸神之首，所到之处，百恶消散。事急可从值符所进临之方出，此谓"急则从神"。\n\n预测用神临值符，则凶事也有惊无险。临值符代表有一定的社会地位，有贵人相帮，有靠山、救星。但值符不可空。测命，值符逢空则年命不保。',
  '腾蛇': '禀南方火，为虚诈之神。性柔而口毒，司惊恐怪异之事。出腾蛇之方主精神恍惚，恶梦惊悸，得使得门则无妨。\n\n测得财看生门，不看戊。戊为自有的财、兜里的财。凡人临戊必破财。临生门发财机遇大。戊为花的钱，生门为赚的钱。',
  '太阴': '禀西方金，为荫佑之神，性阴匿暗昧。太阴之方可以闭城藏兵、避难。\n\n利密谋策划，藏身。性格内向，喜暗中行事。多与女人阴私之事有关。',
  '六合': '禀东方木，为护卫之神，甲木之化气。其神性和平，专司婚姻、交易，媒牙和合之事，又为护卫之神。\n\n稳定性强，测运气，为无太大发展。测事，为过去发生的。测项目，为以前就在做的。时间长久的。旧事物，慢性子，需等待时机而做。',
  '白虎': '禀西方金，为凶恶刚猛之神。性好杀，司兵戈争斗杀伐病死。须防敌方偷袭。得奇门无忌。\n\n杀伐，争斗，疾病，死丧，道路之事。威权，财帛，犬马，金银宝物，孝服，哭泣，凶恶，怪异，血光，骨折等。',
  '玄武': '禀北方水，为奸谗小盗之神。性好阴谋贼害，司盗贼逃亡口舌之事。须提防奸细盗贼。得奇门则无妨。\n\n小偷小摸，偷人，偷情，偷物等。玄武为看不见的小人。',
  '九地': '禀西方金，为凶恶刚猛之神。性好杀，司兵戈争斗杀伐病死。须防敌方偷袭。得奇门无忌。\n\n坤土之象，万物之母。为坚牢之神，性柔好静。九地之方，可以屯兵固守。',
  '九天': '乾金之卦，其体属金。性刚而好斗，所主者，名正言顺之事，为至极之神。若得门得奇，万福咸吉。不得奇得门，也不为凶。威捍之神，利扬兵布阵，行军出兵，利鼓呐喊，张扬，公开，飞鸟，飞机，航天。',
  
  // 天干 meanings
  '甲': '甲为阳木，名为栋梁之木，有盛大疏通之能，其性刚直质硬不曲，最旺茂。主人形体修长，白皮肤，长脸，丰上富下，浓眉秀目，高鼻深目凹耳。为人重义冷静多谋，目光远大。奇门中称甲为日奇，代表长上、父辈、长辈、寺院、庙宇、办公室、商场、田地、树木长方高直之物、农夫、律师、小葱、面条、长条物、稻麦、竹、杆、梯子、筋、头发、眉毛、毛、胆经、肝胆、小便、绿色的、左边、东方、起点、做事的开始、重返、归来、打、碰撞、敲打、强制性、开了一个口的东西如河沟、碗口、容器、女子在男子上为大女儿、妻子、女秘书、副职、副手、男人第一位情人。',
  '乙': '乙为阴木，名为花草之木，有装扮人间之美，质软柔弱，情满人间。主人身材苗条，男子微驼身，皮肤白嫩，骨肉松驰，瘦长脸。为人性情柔顺，重情仁慈，爱打扮，依附世情。奇门中称乙为天德，为仁德之君。代表日奇、女人、妻子、象是人在爬、头发、眉毛、耳朵、舌头、大脑的神经、血管、肠子、肩膀、胳膊、脖子、肩、腿、脚、手、手指、弯曲的东西。乙落离宫为头、血管有毛病。为护士、肝脏、月亮、艺术品、男性生殖器、小孩、蚯蚓、胡子、画、神经、木制的桥、树木、木制的门窗、桌子、椅子、床柜、弯曲的河流、蔬菜、领带、输卵管、中药、中医、草地、花草、蝴蝶、蔬菜类的食品、多足的动物、长大的希望、歌女、水果、腰身、柔软的身材、茶叶等。',
  '丙': '丙为阳火，名为太阳之火，有光明天地功，其性刚烈威严，果敢欺霸。主人体态丰满，圆脸，少胡须，短发，皮肤白里透红。为人性情刚烈勇猛，不怒自威，工作清廉，能成大材，但难持久。奇门中称丙为天威，有雄威之义，代表权威之人、婚姻中第三者男人、情夫、嫖客、月奇、病灶浮肿，炎症部位、手肿、牙龈肿。代表火、太阳、饼、圆形的、红色的、悖、出乱子、红色的花朵、血液、发烧、丙加癸是酒鬼、红嘴唇、心脏血液、脚、男人、也代表女人、发烧友、发炎、窗、高处、炮火、圆脸、炉火、烧烤、烧伤、少男、强烈的希望、小肠、红绿灯、性感、眼镜、欲望、脾气大、急躁、见光的地方、发热的东西、熊猫眼(眼肿的意思)、火焰、流鼻血、超短裙、太阳能等。',
  '丁': '丁为阴火，名为灯烛之火，性质柔弱，有照亮万户之功，为人为己。主人秀丽清高，肤白粉嫩，发细而长，额宽颏尖。为人性情和顺而有心计，体贴人情，洞察奸邪。奇门中称丁为玉女太阴，代一星奇。婚姻中第三者女人、情妇、jì女、三陪女、红色，花、耳丁、火、烟、吸烟、灯光、女孩、打电话、小颗粒的东西、丁有丙的含义、男丁、男小鞭、癸加丁是性行为、眼睛、红嘴唇、血、血管、直、马上达成、希望、丁的希望最好(乙是弯曲实现，丙子是出乱子实现)、高根鞋、画、樱桃、葡萄、肉丁、宫爆鸡丁、胸罩、针灸、扎针、手术刀、牙齿、牙医、香火、烧香、口子、有文化、脐、电子产品、幼儿、小孩、叮咬、盯人(一种动作，看得目不转睛)、路口、丁字路口、高处、瓜子脸、演员、辣椒、子弹、火山喷发等。',
  '戊': '戊为阳土，为大地山川之土，性高亢质硬而向阳，生育万物。主人形体敦厚，四方脸，皮肤黄白，身体多肉，胖子。为人性情果敢豪杰、刚烈暴躁、憨厚或愚笨痴呆、行动迟缓。奇门中称戊为天武为天门，代表资本、钱财、土地、脸、鼻子、胸、乳房、肠胃、脾、屁股、肌肉、肌肤、(乙加戊落乾宫脚肥)性格忠厚、笨、大地、雾、矿石、大石头、水泥、矿产、(房檐上的草叫乙加戊)瓷器、玉器、横梁、屋梁、房子、地质学家、会计、建筑工人、建筑商、金融、黄金、金融机构、农场、城墙、高岗、墙面、桥、讲信用、有财源、经济好等。',
  '己': '己为阴土，为田园之土，有培木溶水之能，其性温质软，低洼向阴。主人形体单薄，瘦弱丑陋，忧愁之相，声音含糊重浊。为人性情静多动少，温顺沉静。奇门中称己为六合为明堂，代表坟地、阴沟、低洼之地、小肉、有戊的性质，嘴、耳坠、脑子、忠厚老实、朋友多、欲望、花花肠子、消化系统、乳头、身体、肚子、肛门、院落、阳台、肚脐附近、小个子、大便、肮脏、马桶、垃圾、地井下水道、坑道、地下室、菜园、低洼、盆地、饭、策划、打结、食物、面包、蛋糕、痘、肚脐眼、餐具、坟地、疤痕、弯曲的河流、幻想、杂乱、脾、水果、药丸等。',
  '庚': '庚为阳金，名为剑戟之金，有刚健肃杀之力，其性刚质硬。主人形体瘦长，骨格健壮，长脸白皮肤，筋强骨健。为人性情刚健敏锐、有威严、坚忍不拔、能屈人而不屈于人。奇门遁甲中称庚为天狱为天刑，代表仇人、丈夫、公ān干警、道路、皮毛、大肠、骨骼、肺、大腿骼、道路、阻隔、阻挡、技术、虎、军人、背、打斗、刀、武器、佛、高个子体态长方、钢键锐力、威严、盆腔、收费站、脊骨、关口、黑社会、车祸、石块、墙角、技术过硬、凶猛等。',
  '辛': '辛为阴金，名为珠玉装饰之金，性软洁静。主人形体修长方正，皮肤白嫩，长脸凹腮，为人性情忠诚爽柔，温润秀气自尊但虚荣，意志稍不坚。奇门中称辛为天庭，代表罪人或犯过错误的人、错误、革命、变革、铁匠、工匠、白色、小石块、手表、斑点、刀具、电子产品、计算器、罪犯、肺、呼吸系统、看守所的狱警、金融界、五金制品、首饰、珠宝、首饰店、门窗、骨头、枪、武术、小路、腰、刑具、粮食、颗粒状的东西、诱惑。',
  '壬': '壬为阳水，名为江河湖海之水，通天河而周流不息，性猛而不收，难以回头。主人皮肤稍黑，大眼睛，走路摇摆，长发秀眉，为人性情柔顺而阴险，勇敢多智，纵欲任性，可共忧患难以同乐。奇门中称壬为天牢，代表不稳定的事物、牢狱、流动的东西、装在什么里就是什么东西、什么事情往回一想就是好事、变动、大水、自来水、热水器、瀑布、糊涂、迷糊、迷茫、柔性、智慧、动脉、血液、血管、流动的车、膀胱、风流、船、海边、码头、海港、海滩、海军、黑色的、怀孕、娱乐的地方、聚众、驾驶员、司机、运输行业、流动的云、门扇、养殖业、海产品、水上运动、鱼类、小孩、小偷、眼睛、演员、邮电行业、道路、鞋子、飘动等。',
  '癸': '癸为阴水，名为雨露之水，性发生至静至弱，滋润万物。主人矮小黑丑，圆脸瘦肩，声调不高，为人性情阴柔怕事，多伤感，不能自主。奇门遁甲中称癸为天网，代表性及性生活有关之事、牢狱、小水、淋浴、饮料、咖啡、可乐、眼泪、哭泣、奶、尿尿、厕所、(癸加辛水珠)汤粥、污水、眼睛(水汪汪的大眼睛)、湿度大的雾气、(戊加癸是钱财都流了)洗浴用品、鞋子、头发、油类、鱼缸、下雨、子宫、足、女性用品、便池、鼻涕、蛋、黑色的发、黑色的眼睛、困难、足、静脉、血液、酒、(癸加己酒鬼，丁加己烟鬼，在坎宫女人来例假)sè情、肾、神经系统、化妆品、小孩子、精液。',
  
  // 马星
  '马星': '逢九天必出行，逢马必动，主最近要出门，出差或旅游。',
  
  // 旬空
  '旬空': '每日旬空是命理中重要概念，指当天十二地支中哪两个地支是"空"的，暗示与这两个地支相关的事项会落空、遇阻或延迟。\n\n在奇门遁甲中，当旬空出现在某宫位，通常表示：\n1. 该宫代表的事物容易落空\n2. 求谋难成，行事不利\n3. 官司、疾病则易解除\n4. 合伙、投资应谨慎\n\n如果用神落在旬空，事情大多难以如愿；如果忌神落在旬空，反而对占事有利。',
  
  // 地支
  '子': '子为北方水之始，属鼠，性柔弱，但蕴含阳光之机，为万物肇始之处。持重藏密，主隐伏，代表阴、水、冬、黑色、阴柔、午夜、子女、精子。',
  '丑': '丑为东北偏北，属牛，上官禄，下临长生，含尊贵之运，主稳重忠厚，坚毅刚健。代表土地、农耕、肌肉、丰收、财富、忍耐。',
  '寅': '寅为东北偏东，属虎，性木，乃生发之始，主勇猛、刚烈、敢作敢为。代表始发、行动、出击、果断、领导力、争斗。',
  '卯': '卯为正东，属兔，阴中之阴，美丽柔和，敏捷灵动，性情温驯。代表生长、发育、灵敏、文艺、柔和、花草生发。',
  '辰': '辰为东南偏东，属龙，乃土中之湿土，通行万物，万物之所由生。代表多变、发展、规划、循序渐进、胎养。',
  '巳': '巳为东南偏南，属蛇，乃吉中之凶，小心谨慎，性灵活巧变。代表阴柔、蜿蜒、变化无常、智慧、温暖、奢华。',
  '午': '午为正南，属马，阳中之阳，正当盛夏，烈日炎炎，阳盛之极。代表奔腾、刚烈、正直、冲动、壮盛、明显。',
  '未': '未为西南偏南，属羊，阴中藏阳，中满之象。土性涵养，纯和之气。代表和顺、随和、温柔、保守、团聚、平和。',
  '申': '申为西南偏西，属猴，阳中含阴，巧思明敏，灵活自如。代表智慧、变通、圆转、灵巧、挫折、转变。',
  '酉': '酉为正西，属鸡，万物收成。阴气始生，阳气始衰。代表收敛、锐利、严谨、收获、成熟、评判。',
  '戌': '戌为西北偏西，属狗，阴中之阴，凋零之象，物极必反。代表忠诚、守卫、禁锢、阻碍、守成、保卫。',
  '亥': '亥为西北偏北，属猪，阴阳平衡，平和宁静，万物归藏。代表内敛、蓄藏、温和、深沉、蕴含、蓄势。',
};

interface InfoState {
  selectedPalace: string | null;
  displayName: string | null;
  showMeaning: boolean;
  currentMeaning: string;
  isHtmlContent: boolean;
  palaceMeanings: Record<string, string>;
}

const initialState: InfoState = {
  selectedPalace: null,
  displayName: null,
  showMeaning: false,
  currentMeaning: '',
  isHtmlContent: false,
  palaceMeanings
};

const infoSlice = createSlice({
  name: 'info',
  initialState,
  reducers: {
    showPalaceMeaning: (state, action: PayloadAction<{ palaceName: string; customDisplayName?: string }>) => {
      const { palaceName, customDisplayName } = action.payload;
      state.selectedPalace = palaceName;
      state.displayName = customDisplayName || palaceName;
      state.currentMeaning = state.palaceMeanings[palaceName] || '未找到解释';
      state.showMeaning = true;
      state.isHtmlContent = false;
    },
    showPalaceInfo: (state, action: PayloadAction<{ palaceName: string; htmlContent: string }>) => {
      const { palaceName, htmlContent } = action.payload;
      state.selectedPalace = palaceName;
      state.displayName = palaceName;
      state.currentMeaning = htmlContent;
      state.showMeaning = true;
      state.isHtmlContent = true;
    },
    hideMeaning: (state) => {
      state.showMeaning = false;
    },
  }
});

export const {
  showPalaceMeaning,
  showPalaceInfo,
  hideMeaning,
} = infoSlice.actions;

export default infoSlice.reducer;

