# 云雀奇门遁甲 - 产品功能规划

本文档详细描述了云雀奇门遁甲应用的产品功能规划，包括用户分层、功能设计、积分系统和商业模式，旨在提供一个既专业又用户友好的奇门遁甲应用平台。

## 一、核心痛点分析

奇门遁甲领域存在以下明显痛点：
1. **入门难度高** - 专业奇门知识晦涩难懂，初学者难以理解盘面含义
2. **专业用户追求精准性** - 资深用户对解读准确度和专业深度要求极高
3. **用户留存挑战** - 一次性查询后用户缺乏持续使用动力
4. **专业性与易用性平衡** - 如何既不失专业性又保持产品易用性

## 二、用户分层策略

### 1. 初学者（70%）
- 需求：简单易懂的解读、不需理解原理、直观结果
- 痛点：专业术语障碍、学习成本高、难以实践应用

### 2. 进阶学习者（20%）
- 需求：系统学习、理解原理、提升技能
- 痛点：缺乏系统指导、无法验证学习成果

### 3. 专业人士（10%）
- 需求：高级工具、精准数据、定制化功能
- 痛点：市场产品不够专业、计算不够严谨

## 三、功能规划（AI增强型）

### 1. 智能解盘系统
```
【功能】AI辅助奇门解读，根据用户问题提供针对性分析
【实现】
- 基础层：传统奇门算法精确计算盘面
- 专业层：人工整理的权威奇门解读规则库
- 智能层：LLM模型根据问题情境生成个性化解读
```

### 2. 分层解读体系
```
【功能】同一盘面提供不同深度解读，满足不同用户需求
【实现】
- 简易版：通俗易懂的结论和建议（AI生成）
- 标准版：包含术语解释和主要格局分析
- 专业版：详细盘面解析，包含专业术语、典籍引用
```

### 3. 解读透明度机制
```
【功能】AI解读内容标注来源和依据，提高专业信任度
【实现】
- 解读溯源：明确标注哪些内容来自经典著作/权威解读
- AI标记：明确区分AI推理部分与传统奇门理论部分
- 引用出处：引用的古籍原文或现代权威著作章节
```

### 4. 奇门学习路径
```
【功能】个性化学习计划，将用户从初学者引导至专业水平
【实现】
- 阶段性学习目标设定
- 每日微课（5分钟学习一个奇门知识点）
- 实战演练（解读真实案例，与专业解读对比）
```

### 5. 盘面解析互动系统
```
【功能】用户可提问具体盘面元素，AI给出针对性解释
【实现】
- 盘面元素可点击，获取该元素详细解释
- 支持自然语言提问（"这个盘中天蓬星落在离宫代表什么？"）
- 专业术语一键解释（悬停或点击显示详解）
```

## 四、功能规划（专业性强化）

### 1. 多派系奇门支持
```
【功能】支持不同流派的奇门盘算法和解读体系
【实现】
- 支持飞盘、转盘多种排盘方式
- 提供多种历法系统选择（如古历、今历等）
- 不同门派解读对比（如三元派、太乙派等）
```

### 2. 高级排盘定制
```
【功能】专业用户可调整排盘参数和计算规则
【实现】
- 自定义历法参数
- 丰富的参考历表（天文历、农历等）
- 多元盘变化推演功能
```

### 3. 奇门数据分析工具
```
【功能】历史盘面数据分析，发现规律和倾向
【实现】
- 用户历史排盘统计分析
- 特定格局出现频率研究
- 自定义数据分析视图
```

### 4. 经典案例库
```
【功能】收录历史上经典奇门案例，与现代解读对比
【实现】
- 经典文献中的奇门案例重现
- 名家解读收录
- 不同解读方法对比
```

## 五、用户粘度提升策略

### 1. 个人命盘档案
```
【功能】建立用户个人命盘库，记录个人重要信息
【实现】
- 重要事件盘面记录与追踪
- 事后验证与反馈机制
- 个人盘面模式分析
```

### 2. 周期性奇门提醒
```
【功能】根据用户关注领域，推送关键奇门提示
【实现】
- 每日/每周奇门运势提醒
- 重要节气变化提醒
- 个人关注领域的奇门格局预警
```

### 3. 奇门社区互动
```
【功能】用户之间交流解盘心得，促进互动和学习
【实现】
- 优质解盘分享与点评
- 难解盘面众筹解读
- 奇门实战案例讨论
```

### 4. 连续使用激励
```
【功能】激励用户持续使用和学习
【实现】
- 奇门知识解锁进度系统
- 连续打卡奖励专业内容
- 学习成就体系
```

## 六、积分系统设计

### 1. 积分获取途径
```
【日常活动】
- 每日登录：10积分/天
- 连续登录奖励：7天连续+50积分，30天连续+300积分
- 首次排盘：50积分
- 每日签到：15积分/天
- 学习奇门课程：10-50积分/课时（根据难度）
- 分享应用：100积分/成功邀请

【社区贡献】
- 发布解盘心得：30积分/篇
- 优质内容（被精选）：额外100积分
- 参与讨论：5积分/有效评论
- 解答他人疑问：20积分/被采纳回答

【技能提升】
- 完成奇门知识测试：20-100积分（根据难度）
- 完成学习路径阶段：100-500积分
- 专业认证：1000积分/认证级别

【付费转换】
- 购买会员可额外获得积分：如年度会员赠送5000积分
- 直接购买积分包：不同价格梯度
```

### 2. 积分使用场景
```
【功能解锁】
- 高级AI解读：200-500积分/次（根据深度）
- 专业盘面解析：300积分/次
- 自定义排盘参数：100积分/次
- 历史盘面存储（超出免费额度）：50积分/盘

【学习资源】
- 解锁高级教程：100-500积分/课程
- 经典书籍电子版：200-1000积分/本
- 专家视频讲解：300积分/课时

【社区特权】
- 创建讨论组：500积分
- 置顶帖子：200积分/天
- 专属头像框/徽章：300-1000积分

【实物兑换】
- 实体奇门书籍：5000-10000积分
- 定制罗盘：20000积分
- 品牌周边：1000-3000积分
```

### 3. 积分经济平衡
```
【积分通货膨胀控制】
- 积分有效期：普通积分一年有效
- 付费获取积分永久有效
- 定期调整积分获取与消耗比例
- 设置积分获取上限（日/周/月）

【数据分析】
- 密切监控积分流通速度
- 分析用户积分获取与使用模式
- 根据数据动态调整积分策略
```

## 七、收费模式设计

### 1. 分层会员制
```
【基础会员】免费
- 基础排盘功能
- AI简易解读
- 有限次数查询
- 每日积分上限低

【进阶会员】月费制
- 无限排盘
- 详细AI解读
- 学习路径与课程
- 积分获取加速（1.5倍）

【专业会员】年费制
- 全部专业功能
- 自定义参数
- 数据导出与API
- 积分获取加速（2倍）
- 专属积分使用场景
```

### 2. 按需付费模式
```
- 单次专业解读：针对重要事件的一次性付费
- 知识包订阅：特定领域（如事业、姻缘）的奇门知识深度解析
- 专家连线：与真人奇门专家一对一解读（AI筛选并提供参考）
- 积分充值包：不同价格档位的积分充值选项
```

## 八、平衡AI与专业性的策略

### 1. 知识库透明化
展示AI使用的知识来源，包括经典著作、现代权威著作等

### 2. 专家审核机制
定期邀请奇门专家审核系统生成的解读，持续优化

### 3. 专业用户共建
邀请专业用户参与知识库建设，贡献优质解读案例

### 4. AI+"传统知识体系
将AI定位为辅助工具，而非替代传统奇门知识体系

## 九、技术实现关键点

### 1. 积分系统数据模型
```typescript
// 积分记录模型
interface IPointRecord {
  user: ObjectId;
  amount: number;  // 可为正（获取）或负（消费）
  type: string;    // 如'daily_login', 'course_complete', 'ai_reading'等
  description: string; 
  relatedEntity?: ObjectId; // 可关联到特定实体（如课程、解读等）
  created: Date;
  expiryDate?: Date; // 积分过期时间
}

// 用户积分账户
interface IUserPoints {
  user: ObjectId;
  totalPoints: number;  // 当前总积分
  totalEarned: number;  // 历史累计获得积分
  totalSpent: number;   // 历史累计消费积分
  dailyRecord: {        // 每日积分记录
    date: Date;
    earned: number;
    spent: number;
  }[];
}
```

### 2. 积分系统API设计
```
/api/points
├── GET /balance                # 获取用户积分余额
├── GET /history                # 获取积分历史记录
│   └── 查询参数: page, limit, type
├── POST /earn                  # 用户获取积分（如完成任务）
│   └── 请求体: { type, amount, relatedEntity? }
├── POST /spend                 # 用户消费积分
│   └── 请求体: { type, amount, relatedEntity? }
└── GET /products               # 获取可用积分兑换的商品/服务列表
```

### 3. AI解读服务架构
```
【前端】
- 用户问题收集与上下文处理
- 解读结果分段展示
- 互动式提问界面

【后端】
- 奇门知识库管理系统
- AI推理服务集成
- 解读结果处理与格式化
- 用户问题历史管理
```

## 十、差异化竞争优势

### 1. 知识深度结合易用性
在保持专业性的同时，通过AI技术降低入门门槛

### 2. 数据驱动的奇门研究
结合用户数据，开展现代化奇门研究，不断演进理论体系

### 3. 社区+工具+学习的生态体系
构建完整生态，而非单一排盘工具

### 4. 个性化体验
基于用户使用习惯、学习进度和关注领域，提供定制化内容

### 5. 积分驱动的成长体系
通过完善的积分系统，激励用户持续参与和提升 

## 十一、包月制预测系统设计

### 1. 基础预测套餐
```
【基础月卡】99元/月
- 每日运势预测（基础版）
- 每周运势总结
- 每月运势分析
- 基础事件预测（如出行、工作等）
- 每日积分获取上限：200积分
```

### 2. 进阶预测套餐
```
【进阶月卡】199元/月
- 包含基础月卡所有功能
- 详细运势预测（包含具体时间点）
- 个性化运势提醒
- 重要事件预警
- 运势变化趋势分析
- 每日积分获取上限：500积分
- 积分获取加速：1.5倍
```

### 3. 专业预测套餐
```
【专业月卡】399元/月
- 包含进阶月卡所有功能
- 精准时间点预测
- 多维度运势分析
- 专业事件解读
- 运势变化实时提醒
- 个性化运势报告
- 每日积分获取上限：1000积分
- 积分获取加速：2倍
- 专属客服支持
```

### 4. 预测系统功能设计
```
【核心功能】
- 智能预测引擎
  - 基于用户命盘数据
  - 结合实时天象变化
  - 多维度数据分析
  - 个性化预测模型

【预测内容】
- 运势预测
  - 每日运势
  - 每周运势
  - 每月运势
  - 年度运势

- 事件预测
  - 工作事业
  - 感情姻缘
  - 财运投资
  - 健康平安
  - 人际关系

- 时间预测
  - 吉时提醒
  - 凶时预警
  - 重要时间点
  - 运势转折点

【预测展示】
- 文字解读
- 图表分析
- 数据可视化
- 趋势预测
```

### 5. 订阅管理
```
【订阅流程】
- 套餐选择
- 支付确认
- 自动续费
- 随时取消

【订阅权益】
- 预测内容访问
- 积分加速获取
- 专属功能使用
- 优先客服支持

【订阅管理】
- 订阅状态查看
- 自动续费设置
- 套餐升级/降级
- 订阅取消
```

### 6. 技术实现
```typescript
// 订阅模型
interface ISubscription {
  userId: ObjectId;
  planType: 'basic' | 'advanced' | 'professional';
  startDate: Date;
  endDate: Date;
  autoRenew: boolean;
  status: 'active' | 'expired' | 'cancelled';
  paymentHistory: {
    amount: number;
    date: Date;
    method: string;
  }[];
}

// 预测内容模型
interface IPrediction {
  userId: ObjectId;
  type: 'daily' | 'weekly' | 'monthly' | 'yearly';
  category: 'fortune' | 'event' | 'timing';
  content: {
    text: string;
    data: any;
    charts: any[];
  };
  createdAt: Date;
  validUntil: Date;
}

// 预测系统API
```
/api/predictions
├── GET /subscription          # 获取订阅信息
├── POST /subscribe           # 订阅套餐
├── PUT /subscription         # 更新订阅
├── DELETE /subscription      # 取消订阅
├── GET /predictions          # 获取预测内容
└── GET /history             # 获取历史预测
```

### 7. 运营策略
```
【新用户策略】
- 首月优惠
- 免费试用期
- 推荐奖励

【留存策略】
- 连续订阅奖励
- 预测准确度反馈
- 个性化内容推荐

【转化策略】
- 套餐升级优惠
- 年度订阅折扣
- 节日特别优惠
```

### 8. 数据安全
```
【用户数据保护】
- 预测数据加密存储
- 隐私信息脱敏
- 访问权限控制

【系统安全】
- 支付安全保障
- 订阅状态验证
- 异常行为监控
``` 